<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>üöÄ NASA Explorer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #0b0c10, #1f2833);
      color: #fff;
      margin: 0;
      padding: 0;
    }
    header {
      text-align: center;
      padding: 20px;
      background: #0b0c10;
      border-bottom: 2px solid #45a29e;
    }
    header h1 { color: #66fcf1; }
    section {
      margin: 20px auto;
      padding: 20px;
      background: #1f2833;
      border-radius: 10px;
      max-width: 900px;
      box-shadow: 0 0 10px rgba(0,0,0,0.5);
    }
    section h2 { color: #66fcf1; margin-bottom: 10px; }
    select, input, button {
      margin: 5px;
      padding: 8px;
      border-radius: 6px;
      border: none;
      outline: none;
    }
    button {
      background: #45a29e;
      color: #fff;
      cursor: pointer;
    }
    button:hover { background: #66fcf1; }
    .result {
      margin-top: 15px;
      padding: 10px;
      background: #0b0c10;
      border-radius: 6px;
      overflow-x: auto;
    }
    img, video {
      max-width: 100%;
      border-radius: 8px;
      margin-top: 10px;
    }
  </style>
</head>
<body>
<header>
  <h1>üöÄ NASA Explorer ‚Äì Full Features</h1>
  <p>Powered by NASA Open APIs</p>
</header>

<!-- ========== APOD ========== -->
<section>
  <h2>üåå Astronomy Picture of the Day (APOD)</h2>
  <select id="apod-year"><option value="">Year</option></select>
  <select id="apod-month"><option value="">Month</option></select>
  <select id="apod-day"><option value="">Day</option></select>
  <button onclick="loadAPOD()">Load APOD</button>
  <div id="apod-result" class="result"></div>
</section>

<!-- ========== Mars Rover ========== -->
<section>
  <h2>ü§ñ Mars Rover Photos</h2>
  <label>Rover:</label>
  <select id="rover">
    <option value="curiosity">Curiosity (2012)</option>
    <option value="opportunity">Opportunity (2004)</option>
    <option value="spirit">Spirit (2004)</option>
    <option value="perseverance">Perseverance (2021)</option>
  </select><br>
  <select id="mars-year"><option value="">Year</option></select>
  <select id="mars-month"><option value="">Month</option></select>
  <select id="mars-day"><option value="">Day</option></select>
  <button onclick="loadMars()">Load Photos</button>
  <div id="mars-result" class="result"></div>
</section>

<!-- ========== EPIC ========== -->
<section>
  <h2>üåç EPIC Earth Images</h2>
  <button onclick="loadEPIC()">Load Latest EPIC</button>
  <div id="epic-result" class="result"></div>
</section>

<!-- ========== NeoWs ========== -->
<section>
  <h2>‚òÑÔ∏è Near Earth Objects (NeoWs)</h2>
  <p>Select Start Date (End = +7 days max)</p>
  <select id="neo-year"><option value="">Year</option></select>
  <select id="neo-month"><option value="">Month</option></select>
  <select id="neo-day"><option value="">Day</option></select>
  <button onclick="loadNEO()">Load NEOs</button>
  <div id="neo-result" class="result"></div>
</section>

<!-- ========== Earth Assets ========== -->
<section>
  <h2>üõ∞ Earth Assets</h2>
  <input id="lat" type="number" step="0.01" placeholder="Latitude">
  <input id="lon" type="number" step="0.01" placeholder="Longitude"><br>
  <select id="earth-year"><option value="">Year</option></select>
  <select id="earth-month"><option value="">Month</option></select>
  <select id="earth-day"><option value="">Day</option></select>
  <button onclick="loadEarth()">Load Assets</button>
  <div id="earth-result" class="result"></div>
</section>

<script>
const API_KEY = "DEMO_KEY";

// Helper: create options for select
function fillSelect(select, start, end) {
  for (let i=start;i<=end;i++) {
    let opt=document.createElement("option");
    opt.value=i; opt.textContent=i;
    select.appendChild(opt);
  }
}

// APOD init
const apodYear=document.getElementById("apod-year");
const apodMonth=document.getElementById("apod-month");
const apodDay=document.getElementById("apod-day");
fillSelect(apodYear,1995,new Date().getFullYear());
fillSelect(apodMonth,1,12);
fillSelect(apodDay,1,31);

function loadAPOD(){
  const y=apodYear.value,m=apodMonth.value,d=apodDay.value;
  if(!y||!m||!d) return alert("Ch·ªçn ƒë·ªß date!");
  let date=`${y}-${String(m).padStart(2,"0")}-${String(d).padStart(2,"0")}`;
  fetch(`https://api.nasa.gov/planetary/apod?api_key=${API_KEY}&date=${date}`)
  .then(r=>r.json()).then(data=>{
    let html=`<h3>${data.title}</h3><p>${data.date}</p><p>${data.explanation}</p>`;
    if(data.media_type==="image") html+=`<img src="${data.url}">`;
    else html+=`<iframe src="${data.url}" width="100%" height="400"></iframe>`;
    document.getElementById("apod-result").innerHTML=html;
  });
}

// Mars Rover init
const marsYear=document.getElementById("mars-year");
const marsMonth=document.getElementById("mars-month");
const marsDay=document.getElementById("mars-day");
fillSelect(marsYear,2004,new Date().getFullYear());
fillSelect(marsMonth,1,12);
fillSelect(marsDay,1,31);

function loadMars(){
  const rover=document.getElementById("rover").value;
  const y=marsYear.value,m=marsMonth.value,d=marsDay.value;
  if(!y||!m||!d) return alert("Ch·ªçn ƒë·ªß date!");
  let date=`${y}-${String(m).padStart(2,"0")}-${String(d).padStart(2,"0")}`;
  fetch(`https://api.nasa.gov/mars-photos/api/v1/rovers/${rover}/photos?earth_date=${date}&api_key=${API_KEY}`)
  .then(r=>r.json()).then(data=>{
    if(!data.photos.length){ 
      document.getElementById("mars-result").innerHTML="No photos this day!";
      return;
    }
    let html="";
    data.photos.slice(0,5).forEach(p=>{
      html+=`<img src="${p.img_src}"><p>${p.rover.name} - ${p.camera.full_name}</p>`;
    });
    document.getElementById("mars-result").innerHTML=html;
  });
}

// EPIC
function loadEPIC(){
  fetch(`https://api.nasa.gov/EPIC/api/natural?api_key=${API_KEY}`)
  .then(r=>r.json()).then(data=>{
    if(!data.length) return;
    let latest=data[0];
    let date=latest.date.split(" ")[0].replace(/-/g,"/");
    let img=`https://epic.gsfc.nasa.gov/archive/natural/${date}/png/${latest.image}.png`;
    document.getElementById("epic-result").innerHTML=`<h3>${latest.date}</h3><img src="${img}">`;
  });
}

// NEO
const neoYear=document.getElementById("neo-year");
const neoMonth=document.getElementById("neo-month");
const neoDay=document.getElementById("neo-day");
fillSelect(neoYear,2000,new Date().getFullYear());
fillSelect(neoMonth,1,12);
fillSelect(neoDay,1,31);

function loadNEO(){
  const y=neoYear.value,m=neoMonth.value,d=neoDay.value;
  if(!y||!m||!d) return alert("Ch·ªçn ƒë·ªß date!");
  let start=`${y}-${String(m).padStart(2,"0")}-${String(d).padStart(2,"0")}`;
  fetch(`https://api.nasa.gov/neo/rest/v1/feed?start_date=${start}&api_key=${API_KEY}`)
  .then(r=>r.json()).then(data=>{
    let list=[];
    for(let date in data.near_earth_objects){
      data.near_earth_objects[date].forEach(neo=>{
        list.push(`${date}: ${neo.name} (mag ${neo.absolute_magnitude_h})`);
      });
    }
    document.getElementById("neo-result").innerHTML="<pre>"+list.slice(0,10).join("\n")+"</pre>";
  });
}

// Earth Assets
const earthYear=document.getElementById("earth-year");
const earthMonth=document.getElementById("earth-month");
const earthDay=document.getElementById("earth-day");
fillSelect(earthYear,2010,new Date().getFullYear());
fillSelect(earthMonth,1,12);
fillSelect(earthDay,1,31);

function loadEarth(){
  const lat=document.getElementById("lat").value;
  const lon=document.getElementById("lon").value;
  const y=earthYear.value,m=earthMonth.value,d=earthDay.value;
  if(!lat||!lon||!y||!m||!d) return alert("ƒêi·ªÅn lat/lon + date!");
  let begin=`${y}-${String(m).padStart(2,"0")}-${String(d).padStart(2,"0")}`;
  fetch(`https://api.nasa.gov/planetary/earth/assets?lon=${lon}&lat=${lat}&begin=${begin}&api_key=${API_KEY}`)
  .then(r=>r.json()).then(data=>{
    if(!data.results||!data.results.length){
      document.getElementById("earth-result").innerHTML="No assets found!";
      return;
    }
    let html="";
    data.results.slice(0,5).forEach(item=>{
      html+=`<p>${item.date}</p><img src="${item.url}">`;
    });
    document.getElementById("earth-result").innerHTML=html;
  });
}
</script>
</body>
</html>
